%%-*-latex-*-

\documentclass[11pt]{article}

\usepackage{pst-plot,pst-eps}
\input{commands}

\begin{document}

\TeXtoEPS
\begin{pspicture}[showgrid=false](1,-1)(-7,4)
\psaxes[axesstyle=axes,tickstyle=bottom,labels=none]{->}(-7,4)
\psset{linewidth=0.1pt}
\psaxes[axesstyle=none,tickstyle=top,labels=none,ticks=x,ticksize=4](-7,4)
\psaxes[axesstyle=none,tickstyle=top,labels=none,ticks=y,ticksize=7](-7,4)(0,0)
\psline(0,1)(-1,1)

\psset{linewidth=0.4pt}
\psline(0,0)(0.15,0)
\uput[180]{0}(0.6,0){0}
\psline(0,1)(0.15,1)
\uput[180]{0}(0.6,1){1}
\psline(0,2)(0.15,2)
\uput[180]{0}(0.6,2){2}
\psline(0,3)(0.15,3)
\uput[180]{0}(0.6,3){3}
\uput[180]{0}(0.6,4){4}

\uput[180]{90}(1.1,2){version length} 
\uput[180]{0}(0.1,-0.3){\fun{push}}
\uput[180]{0}(-0.9,-0.3){\fun{push}}
\uput[180]{0}(-2,-0.33){\fun{pop}}
\uput[180]{0}(-2.9,-0.3){\fun{push}}
\uput[180]{0}(-3.9,-0.3){\fun{push}}
\uput[180]{0}(-5,-0.33){\fun{pop}}
\uput[180]{0}(-6,-0.33){\fun{pop}}
\uput[180]{0}(-2.75,-0.8){update}

\psset{linewidth=1.5pt}
\psline[linestyle=dotted,arrows=->](0,0)(-0.95,0.95)
\psline[arrows=*-](-1,1)(-2,2)
\psline(-2,2)(-3,1)(-5,3)(-6,2)
\psline{-*}(-6,2)(-7,1)
\psline[linestyle=dashed]{->}(-7,1)(-1.05,1)

\rput{-45}(-0.35,0.6){\(1\)}
\rput{-45}(-1.34,1.6){\(2\)}
\rput{45}(-2.65,1.62){\(2\)}
\rput{-45}(-3.3,1.6){\(3\)}
\rput{-45}(-4.35,2.65){\(4\)}
\rput{45}(-5.65,2.62){\(4\)}
\rput{45}(-6.65,1.62){\(3\)}

\end{pspicture}
\endTeXtoEPS

\end{document}
